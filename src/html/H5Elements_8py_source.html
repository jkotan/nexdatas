<!-- This comment will put IE 6, 7 and 8 in quirks mode -->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>NeXDaTaS: H5Elements.py Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javaScript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.6.1 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="index.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <img id="MSearchSelect" src="search/search.png"
             onmouseover="return searchBox.OnSearchSelectShow()"
             onmouseout="return searchBox.OnSearchSelectHide()"
             alt=""/>
        <input type="text" id="MSearchField" value="Search" accesskey="S"
             onfocus="searchBox.OnSearchFieldFocus(true)" 
             onblur="searchBox.OnSearchFieldFocus(false)" 
             onkeyup="searchBox.OnSearchFieldChange(event)"/>
        <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
        </div>
      </li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
    </ul>
  </div>
<h1>H5Elements.py</h1><a href="H5Elements_8py.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">#!/usr/bin/env python</span>
<a name="l00002"></a>00002 <span class="comment">#   This file is part of nexdatas - Tango Server for NeXus data writer</span>
<a name="l00003"></a>00003 <span class="comment">#</span>
<a name="l00004"></a>00004 <span class="comment">#    Copyright (C) 2012 Jan Kotanski</span>
<a name="l00005"></a>00005 <span class="comment">#</span>
<a name="l00006"></a>00006 <span class="comment">#    Foobar is free software: you can redistribute it and/or modify</span>
<a name="l00007"></a>00007 <span class="comment">#    it under the terms of the GNU General Public License as published by</span>
<a name="l00008"></a>00008 <span class="comment">#    the Free Software Foundation, either version 3 of the License, or</span>
<a name="l00009"></a>00009 <span class="comment">#    (at your option) any later version.</span>
<a name="l00010"></a>00010 <span class="comment">#</span>
<a name="l00011"></a>00011 <span class="comment">#    Foobar is distributed in the hope that it will be useful,</span>
<a name="l00012"></a>00012 <span class="comment">#    but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<a name="l00013"></a>00013 <span class="comment">#    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<a name="l00014"></a>00014 <span class="comment">#    GNU General Public License for more details.</span>
<a name="l00015"></a>00015 <span class="comment">#</span>
<a name="l00016"></a>00016 <span class="comment">#    You should have received a copy of the GNU General Public License</span>
<a name="l00017"></a>00017 <span class="comment">#    along with Foobar.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<a name="l00018"></a>00018 <span class="comment">## \package nexdatas</span>
<a name="l00019"></a>00019 <span class="comment">## \file H5Elements.py</span>
<a name="l00020"></a>00020 <span class="comment"># NeXus runnable elements</span>
<a name="l00021"></a>00021                                                                       
<a name="l00022"></a>00022 <span class="keyword">import</span> pni.nx.h5 <span class="keyword">as</span> nx
<a name="l00023"></a>00023 
<a name="l00024"></a>00024 <span class="keyword">from</span> numpy  <span class="keyword">import</span> * 
<a name="l00025"></a>00025 
<a name="l00026"></a>00026 <span class="keyword">from</span> DataSource <span class="keyword">import</span> *
<a name="l00027"></a>00027 
<a name="l00028"></a>00028 <span class="keyword">from</span> DataHolder <span class="keyword">import</span> *
<a name="l00029"></a>00029 
<a name="l00030"></a>00030 
<a name="l00031"></a>00031 <span class="keyword">from</span> Element <span class="keyword">import</span> *
<a name="l00032"></a>00032 
<a name="l00033"></a>00033 
<a name="l00034"></a>00034 <span class="comment">## type collenction</span>
<a name="l00035"></a><a class="code" href="classH5Elements_1_1NTP.html">00035</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1NTP.html" title="type collenction">NTP</a>:
<a name="l00036"></a>00036     <span class="comment">## Tango types</span>
<a name="l00037"></a><a class="code" href="classH5Elements_1_1NTP.html#a83b9c1613ba0036093f686ad15b288cb">00037</a>     tTypes=[<span class="stringliteral">&quot;DevVoid&quot;</span>,
<a name="l00038"></a>00038             <span class="stringliteral">&quot;DevBoolean&quot;</span>,
<a name="l00039"></a>00039             <span class="stringliteral">&quot;DevShort&quot;</span>,
<a name="l00040"></a>00040             <span class="stringliteral">&quot;DevLong&quot;</span>,
<a name="l00041"></a>00041             <span class="stringliteral">&quot;DevFloat&quot;</span>,
<a name="l00042"></a>00042             <span class="stringliteral">&quot;DevDouble&quot;</span>,
<a name="l00043"></a>00043             <span class="stringliteral">&quot;DevUShort&quot;</span>,
<a name="l00044"></a>00044             <span class="stringliteral">&quot;DevULong&quot;</span>,
<a name="l00045"></a>00045             <span class="stringliteral">&quot;DevString&quot;</span>,
<a name="l00046"></a>00046             <span class="stringliteral">&quot;DevVarCharArray&quot;</span>,
<a name="l00047"></a>00047             <span class="stringliteral">&quot;DevVarShortArray&quot;</span>,
<a name="l00048"></a>00048             <span class="stringliteral">&quot;DevVarLongArray&quot;</span>,
<a name="l00049"></a>00049             <span class="stringliteral">&quot;DevVarFloatArray&quot;</span>,
<a name="l00050"></a>00050             <span class="stringliteral">&quot;DevVarDoubleArray&quot;</span>,
<a name="l00051"></a>00051             <span class="stringliteral">&quot;DevVarUShortArray&quot;</span>,
<a name="l00052"></a>00052             <span class="stringliteral">&quot;DevVarULongArray&quot;</span>,
<a name="l00053"></a>00053             <span class="stringliteral">&quot;DevVarStringArray&quot;</span>,
<a name="l00054"></a>00054             <span class="stringliteral">&quot;DevVarLongStringArray&quot;</span>,
<a name="l00055"></a>00055             <span class="stringliteral">&quot;DevVarDoubleStringArray&quot;</span>,
<a name="l00056"></a>00056             <span class="stringliteral">&quot;DevState&quot;</span>,
<a name="l00057"></a>00057             <span class="stringliteral">&quot;ConstDevString&quot;</span>,
<a name="l00058"></a>00058             <span class="stringliteral">&quot;DevVarBooleanArray&quot;</span>,
<a name="l00059"></a>00059             <span class="stringliteral">&quot;DevUChar&quot;</span>,
<a name="l00060"></a>00060             <span class="stringliteral">&quot;DevLong64&quot;</span>,
<a name="l00061"></a>00061             <span class="stringliteral">&quot;DevULong64&quot;</span>,
<a name="l00062"></a>00062             <span class="stringliteral">&quot;DevVarLong64Array&quot;</span>,
<a name="l00063"></a>00063             <span class="stringliteral">&quot;DevVarULong64Array&quot;</span>,
<a name="l00064"></a>00064             <span class="stringliteral">&quot;DevInt&quot;</span>,
<a name="l00065"></a>00065             <span class="stringliteral">&quot;DevEncoded&quot;</span>]
<a name="l00066"></a>00066     
<a name="l00067"></a>00067     <span class="comment">## NeXuS types corresponding to the Tango types</span>
<a name="l00068"></a><a class="code" href="classH5Elements_1_1NTP.html#a23163fb2be7e3667f630d1568cd556dd">00068</a>     nTypes=[<span class="stringliteral">&quot;NX_CHAR&quot;</span>,
<a name="l00069"></a>00069             <span class="stringliteral">&quot;NX_BOOLEAN&quot;</span>,
<a name="l00070"></a>00070             <span class="stringliteral">&quot;NX_INT32&quot;</span>,
<a name="l00071"></a>00071             <span class="stringliteral">&quot;NX_INT32&quot;</span>,
<a name="l00072"></a>00072             <span class="stringliteral">&quot;NX_FLOAT32&quot;</span>,
<a name="l00073"></a>00073             <span class="stringliteral">&quot;NX_FLOAT64&quot;</span>,
<a name="l00074"></a>00074             <span class="stringliteral">&quot;NX_UINT32&quot;</span>,
<a name="l00075"></a>00075             <span class="stringliteral">&quot;NX_UINT32&quot;</span>,
<a name="l00076"></a>00076             <span class="stringliteral">&quot;NX_CHAR&quot;</span>,
<a name="l00077"></a>00077             <span class="stringliteral">&quot;NX_CHAR&quot;</span>
<a name="l00078"></a>00078             <span class="stringliteral">&quot;NX_INT32&quot;</span>,
<a name="l00079"></a>00079             <span class="stringliteral">&quot;NX_INT64&quot;</span>,
<a name="l00080"></a>00080             <span class="stringliteral">&quot;NX_FLOAT32&quot;</span>,
<a name="l00081"></a>00081             <span class="stringliteral">&quot;NX_FLOAT64&quot;</span>,
<a name="l00082"></a>00082             <span class="stringliteral">&quot;NX_UINT32&quot;</span>,
<a name="l00083"></a>00083             <span class="stringliteral">&quot;NX_UINT64&quot;</span>,
<a name="l00084"></a>00084             <span class="stringliteral">&quot;NX_CHAR&quot;</span>,
<a name="l00085"></a>00085             <span class="stringliteral">&quot;NX_CHAR&quot;</span>,
<a name="l00086"></a>00086             <span class="stringliteral">&quot;NX_CHAR&quot;</span>,
<a name="l00087"></a>00087             <span class="stringliteral">&quot;NX_CHAR&quot;</span>,
<a name="l00088"></a>00088             <span class="stringliteral">&quot;NX_CHAR&quot;</span>,
<a name="l00089"></a>00089             <span class="stringliteral">&quot;NX_BOOLEAN&quot;</span>,
<a name="l00090"></a>00090             <span class="stringliteral">&quot;NX_CHAR&quot;</span>,
<a name="l00091"></a>00091             <span class="stringliteral">&quot;NX_INT64&quot;</span>,
<a name="l00092"></a>00092             <span class="stringliteral">&quot;NX_UINT64&quot;</span>,
<a name="l00093"></a>00093             <span class="stringliteral">&quot;NX_INT64&quot;</span>,
<a name="l00094"></a>00094             <span class="stringliteral">&quot;NX_UINT64&quot;</span>,
<a name="l00095"></a>00095             <span class="stringliteral">&quot;NX_INT&quot;</span>,
<a name="l00096"></a>00096             <span class="stringliteral">&quot;NX_CHAR&quot;</span>]
<a name="l00097"></a>00097 
<a name="l00098"></a>00098 
<a name="l00099"></a>00099 
<a name="l00100"></a>00100     <span class="comment">## map of NEXUS : pninx types </span>
<a name="l00101"></a><a class="code" href="classH5Elements_1_1NTP.html#a05bf30cad9ac73ab9e1128b561b6b32f">00101</a>     mt={<span class="stringliteral">&quot;NX_FLOAT32&quot;</span>:<span class="stringliteral">&quot;float32&quot;</span>,<span class="stringliteral">&quot;NX_FLOAT64&quot;</span>:<span class="stringliteral">&quot;float64&quot;</span>,<span class="stringliteral">&quot;NX_FLOAT&quot;</span>:<span class="stringliteral">&quot;float64&quot;</span>,<span class="stringliteral">&quot;NX_NUMBER&quot;</span>:<span class="stringliteral">&quot;float64&quot;</span>,<span class="stringliteral">&quot;NX_INT&quot;</span>:<span class="stringliteral">&quot;int64&quot;</span>,<span class="stringliteral">&quot;NX_INT64&quot;</span>:<span class="stringliteral">&quot;int64&quot;</span>,<span class="stringliteral">&quot;NX_INT32&quot;</span>:<span class="stringliteral">&quot;int32&quot;</span>,<span class="stringliteral">&quot;NX_UINT64&quot;</span>:<span class="stringliteral">&quot;uint64&quot;</span>,<span class="stringliteral">&quot;NX_UINT32&quot;</span>:<span class="stringliteral">&quot;uint32&quot;</span>,<span class="stringliteral">&quot;NX_DATE_TIME&quot;</span>:<span class="stringliteral">&quot;string&quot;</span>,<span class="stringliteral">&quot;NX_CHAR&quot;</span>:<span class="stringliteral">&quot;string&quot;</span>,<span class="stringliteral">&quot;NX_BOOLEAN&quot;</span>:<span class="stringliteral">&quot;int32&quot;</span>}
<a name="l00102"></a>00102 
<a name="l00103"></a>00103     <span class="comment">## map of tag attribute types </span>
<a name="l00104"></a><a class="code" href="classH5Elements_1_1NTP.html#a7b815d5a20b6b3950e022918a1ca3982">00104</a>     dA={<span class="stringliteral">&quot;signal&quot;</span>:<span class="stringliteral">&quot;NX_INT&quot;</span>,<span class="stringliteral">&quot;axis&quot;</span>:<span class="stringliteral">&quot;NX_INT&quot;</span>,<span class="stringliteral">&quot;primary&quot;</span>:<span class="stringliteral">&quot;NX_INT32&quot;</span>,<span class="stringliteral">&quot;offset&quot;</span>:<span class="stringliteral">&quot;NX_INT&quot;</span>,<span class="stringliteral">&quot;stride&quot;</span>:<span class="stringliteral">&quot;NX_INT&quot;</span>,<span class="stringliteral">&quot;vector&quot;</span>:<span class="stringliteral">&quot;NX_FLOATVECTOR&quot;</span>,
<a name="l00105"></a>00105         <span class="stringliteral">&quot;file_time&quot;</span>:<span class="stringliteral">&quot;NX_DATE_TIME&quot;</span>,<span class="stringliteral">&quot;file_update_time&quot;</span>:<span class="stringliteral">&quot;NX_DATE_TIME&quot;</span>,<span class="stringliteral">&quot;restricted&quot;</span>:<span class="stringliteral">&quot;NX_INT&quot;</span>,<span class="stringliteral">&quot;ignoreExtraGroups&quot;</span>:<span class="stringliteral">&quot;NX_BOOLEAN&quot;</span>,
<a name="l00106"></a>00106         <span class="stringliteral">&quot;ignoreExtraFields&quot;</span>:<span class="stringliteral">&quot;NX_BOOLEAN&quot;</span>,<span class="stringliteral">&quot;ignoreExtraAttributes&quot;</span>:<span class="stringliteral">&quot;NX_BOOLEAN&quot;</span>,<span class="stringliteral">&quot;minOccus&quot;</span>:<span class="stringliteral">&quot;NX_INT&quot;</span>,<span class="stringliteral">&quot;maxOccus&quot;</span>:<span class="stringliteral">&quot;NX_INT&quot;</span>
<a name="l00107"></a>00107         }
<a name="l00108"></a>00108 
<a name="l00109"></a>00109 
<a name="l00110"></a>00110 
<a name="l00111"></a>00111 
<a name="l00112"></a>00112 <span class="comment">## NeXuS runnable tag element</span>
<a name="l00113"></a>00113 <span class="comment"># tag element corresponding to one of H5 objects </span>
<a name="l00114"></a><a class="code" href="classH5Elements_1_1FElement.html">00114</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1FElement.html" title="NeXuS runnable tag element tag element corresponding to one of H5 objects.">FElement</a>(<a class="code" href="classElement_1_1Element.html" title="Tag element stored on our stack.">Element</a>):
<a name="l00115"></a>00115     
<a name="l00116"></a>00116     <span class="comment">## constructor</span>
<a name="l00117"></a>00117     <span class="comment"># \param name tag name</span>
<a name="l00118"></a>00118     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00119"></a>00119     <span class="comment"># \param last the last element from the stack</span>
<a name="l00120"></a>00120     <span class="comment"># \param obj H5 file object</span>
<a name="l00121"></a><a class="code" href="classH5Elements_1_1FElement.html#ac013d152339bec50771f059a62e764c7">00121</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1FElement.html#ac013d152339bec50771f059a62e764c7" title="constructor">__init__</a>(self,name,attrs,last,obj=None):
<a name="l00122"></a>00122         Element.__init__(self,name,attrs,last)
<a name="l00123"></a>00123         <span class="comment">## stored H5 file object </span>
<a name="l00124"></a><a class="code" href="classH5Elements_1_1FElement.html#a09a6294d06d1bdaf337218bc9db31309">00124</a>         self.<a class="code" href="classH5Elements_1_1FElement.html#a09a6294d06d1bdaf337218bc9db31309" title="stored H5 file object">fObject</a>=<span class="keywordtype">None</span>
<a name="l00125"></a>00125         <span class="keywordflow">if</span> obj:
<a name="l00126"></a>00126             self.<a class="code" href="classH5Elements_1_1FElement.html#a09a6294d06d1bdaf337218bc9db31309" title="stored H5 file object">fObject</a>=obj
<a name="l00127"></a>00127         <span class="comment">## data source    </span>
<a name="l00128"></a><a class="code" href="classH5Elements_1_1FElement.html#afa877c4dd573134f9483a9a35deedda7">00128</a>         self.<a class="code" href="classH5Elements_1_1FElement.html#afa877c4dd573134f9483a9a35deedda7" title="data source">source</a>=<span class="keywordtype">None</span>
<a name="l00129"></a>00129 
<a name="l00130"></a>00130     <span class="comment">## runner  </span>
<a name="l00131"></a>00131     <span class="comment"># \brief During its thread run it fetches the data from the source  </span>
<a name="l00132"></a><a class="code" href="classH5Elements_1_1FElement.html#ab857523cc7673e38615eca1c808d6663">00132</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1FElement.html#ab857523cc7673e38615eca1c808d6663" title="runner">run</a>(self):
<a name="l00133"></a>00133         <span class="keywordflow">if</span> self.<a class="code" href="classH5Elements_1_1FElement.html#afa877c4dd573134f9483a9a35deedda7" title="data source">source</a>:
<a name="l00134"></a>00134             self.<a class="code" href="classH5Elements_1_1FElement.html#afa877c4dd573134f9483a9a35deedda7" title="data source">source</a>.getData()
<a name="l00135"></a>00135 
<a name="l00136"></a>00136 
<a name="l00137"></a>00137 <span class="comment">## field H5 tag element</span>
<a name="l00138"></a><a class="code" href="classH5Elements_1_1EField.html">00138</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1EField.html" title="field H5 tag element">EField</a>(<a class="code" href="classH5Elements_1_1FElement.html" title="NeXuS runnable tag element tag element corresponding to one of H5 objects.">FElement</a>):        
<a name="l00139"></a>00139     <span class="comment">## constructor</span>
<a name="l00140"></a>00140     <span class="comment"># \param name tag name</span>
<a name="l00141"></a>00141     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00142"></a>00142     <span class="comment"># \param last the last element from the stack</span>
<a name="l00143"></a><a class="code" href="classH5Elements_1_1EField.html#ad58a5277143c1a17c5e004c92081d937">00143</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EField.html#ad58a5277143c1a17c5e004c92081d937" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00144"></a>00144         FElement.__init__(self,name,attrs,last)
<a name="l00145"></a>00145         <span class="comment">## rank of the field</span>
<a name="l00146"></a><a class="code" href="classH5Elements_1_1EField.html#a20fcb945f9ef6edef2c9f985130b1027">00146</a>         self.<a class="code" href="classH5Elements_1_1EField.html#a20fcb945f9ef6edef2c9f985130b1027" title="rank of the field">rank</a>=<span class="stringliteral">&quot;0&quot;</span>
<a name="l00147"></a>00147         <span class="comment">## shape of the field</span>
<a name="l00148"></a><a class="code" href="classH5Elements_1_1EField.html#a0eb574a560fd8be9ff14e3672fae3d7d">00148</a>         self.<a class="code" href="classH5Elements_1_1EField.html#a0eb574a560fd8be9ff14e3672fae3d7d" title="shape of the field">lengths</a>={}
<a name="l00149"></a>00149         <span class="comment">## dictionary with attribures from sepatare attribute tags</span>
<a name="l00150"></a><a class="code" href="classH5Elements_1_1EField.html#a4279511bf17bbc59fbf1fe19408a98e8">00150</a>         self.<a class="code" href="classH5Elements_1_1EField.html#a4279511bf17bbc59fbf1fe19408a98e8" title="dictionary with attribures from sepatare attribute tags">tpAttrs</a>={}
<a name="l00151"></a>00151         <span class="comment">## if field is stored in STEP mode</span>
<a name="l00152"></a><a class="code" href="classH5Elements_1_1EField.html#a5f0837583c5bf72ca38465ad218305d1">00152</a>         self.<a class="code" href="classH5Elements_1_1EField.html#a5f0837583c5bf72ca38465ad218305d1" title="if field is stored in STEP mode">extraD</a>=<span class="keyword">False</span>
<a name="l00153"></a>00153 
<a name="l00154"></a>00154     <span class="comment">## stores the tag content</span>
<a name="l00155"></a>00155     <span class="comment"># \param name the tag name    </span>
<a name="l00156"></a><a class="code" href="classH5Elements_1_1EField.html#a840c5d5bebc6d08587c2d8a06dbbe3d2">00156</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EField.html#a840c5d5bebc6d08587c2d8a06dbbe3d2" title="stores the tag content">store</a>(self,name):
<a name="l00157"></a>00157         <span class="keywordflow">print</span> <span class="stringliteral">&quot;Storing field&quot;</span>
<a name="l00158"></a>00158 
<a name="l00159"></a>00159         self.<a class="code" href="classH5Elements_1_1EField.html#a5f0837583c5bf72ca38465ad218305d1" title="if field is stored in STEP mode">extraD</a>=<span class="keyword">False</span>
<a name="l00160"></a>00160         <span class="keywordflow">if</span> self.source <span class="keywordflow">and</span> self.source.isValid() <span class="keywordflow">and</span> self.source.strategy == <span class="stringliteral">&quot;STEP&quot;</span>:
<a name="l00161"></a>00161             self.<a class="code" href="classH5Elements_1_1EField.html#a5f0837583c5bf72ca38465ad218305d1" title="if field is stored in STEP mode">extraD</a>=<span class="keyword">True</span>
<a name="l00162"></a>00162             
<a name="l00163"></a>00163         <span class="keywordflow">if</span> <span class="stringliteral">&quot;name&quot;</span> <span class="keywordflow">in</span> self.tAttrs.keys():
<a name="l00164"></a>00164             nm=self.tAttrs[<span class="stringliteral">&quot;name&quot;</span>]
<a name="l00165"></a>00165             <span class="keywordflow">if</span> <span class="stringliteral">&quot;type&quot;</span> <span class="keywordflow">in</span> self.tAttrs.keys():
<a name="l00166"></a>00166                 tp=NTP.mt[self.tAttrs[<span class="stringliteral">&quot;type&quot;</span>]]
<a name="l00167"></a>00167             <span class="keywordflow">else</span>:
<a name="l00168"></a>00168                 tp=<span class="stringliteral">&quot;string&quot;</span>
<a name="l00169"></a>00169         <span class="keywordflow">else</span>:
<a name="l00170"></a>00170             <span class="keywordflow">raise</span> <span class="stringliteral">&quot; Field without a name !!!&quot;</span>
<a name="l00171"></a>00171 
<a name="l00172"></a>00172 
<a name="l00173"></a>00173         shape=[]
<a name="l00174"></a>00174         <span class="keywordflow">if</span> self.<a class="code" href="classH5Elements_1_1EField.html#a5f0837583c5bf72ca38465ad218305d1" title="if field is stored in STEP mode">extraD</a>:
<a name="l00175"></a>00175             shape.append(0)
<a name="l00176"></a>00176         <span class="keywordflow">if</span> int(self.<a class="code" href="classH5Elements_1_1EField.html#a20fcb945f9ef6edef2c9f985130b1027" title="rank of the field">rank</a>)&gt;1  <span class="keywordflow">or</span> (int(self.<a class="code" href="classH5Elements_1_1EField.html#a20fcb945f9ef6edef2c9f985130b1027" title="rank of the field">rank</a>)&gt;0 <span class="keywordflow">and</span> int(self.<a class="code" href="classH5Elements_1_1EField.html#a0eb574a560fd8be9ff14e3672fae3d7d" title="shape of the field">lengths</a>[<span class="stringliteral">&quot;1&quot;</span>].encode())&gt;=1):
<a name="l00177"></a>00177             <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(int(self.<a class="code" href="classH5Elements_1_1EField.html#a20fcb945f9ef6edef2c9f985130b1027" title="rank of the field">rank</a>)):
<a name="l00178"></a>00178                 si=str(i+1)
<a name="l00179"></a>00179                 <span class="keywordflow">if</span> si <span class="keywordflow">in</span> self.<a class="code" href="classH5Elements_1_1EField.html#a0eb574a560fd8be9ff14e3672fae3d7d" title="shape of the field">lengths</a>.keys():
<a name="l00180"></a>00180                     <span class="keywordflow">if</span> int(self.<a class="code" href="classH5Elements_1_1EField.html#a0eb574a560fd8be9ff14e3672fae3d7d" title="shape of the field">lengths</a>[si]) &gt;0:
<a name="l00181"></a>00181                         shape.append(int(self.<a class="code" href="classH5Elements_1_1EField.html#a0eb574a560fd8be9ff14e3672fae3d7d" title="shape of the field">lengths</a>[si]))
<a name="l00182"></a>00182                 <span class="keywordflow">else</span>:
<a name="l00183"></a>00183                     <span class="keywordflow">raise</span> <span class="stringliteral">&quot;Wrongly defined shape&quot;</span>
<a name="l00184"></a>00184         
<a name="l00185"></a>00185 <span class="comment">#        print &quot;shape:&quot;, shape</span>
<a name="l00186"></a>00186 
<a name="l00187"></a>00187 
<a name="l00188"></a>00188         <span class="keywordflow">if</span> len(shape)&gt;0:
<a name="l00189"></a>00189 <span class="comment">#            if tp.encode() ==&apos;string&apos;:</span>
<a name="l00190"></a>00190 <span class="comment">#                shape.append(None)</span>
<a name="l00191"></a>00191                 
<a name="l00192"></a>00192             f=self.lastObject().create_field(nm.encode(),tp.encode(),shape)
<a name="l00193"></a>00193         <span class="keywordflow">else</span>:
<a name="l00194"></a>00194             f=self.lastObject().create_field(nm.encode(),tp.encode())
<a name="l00195"></a>00195 
<a name="l00196"></a>00196 
<a name="l00197"></a>00197         <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self.tAttrs.keys():
<a name="l00198"></a>00198             <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> [<span class="stringliteral">&quot;name&quot;</span>]:
<a name="l00199"></a>00199                 (f.attr(key.encode(),<span class="stringliteral">&quot;string&quot;</span>)).value=self.tAttrs[key].strip().encode()
<a name="l00200"></a>00200 
<a name="l00201"></a>00201 
<a name="l00202"></a>00202         <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self.<a class="code" href="classH5Elements_1_1EField.html#a4279511bf17bbc59fbf1fe19408a98e8" title="dictionary with attribures from sepatare attribute tags">tpAttrs</a>.keys():
<a name="l00203"></a>00203             <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> [<span class="stringliteral">&quot;name&quot;</span>]:
<a name="l00204"></a>00204                 (f.attr(key.encode(),NTP.mt[self.<a class="code" href="classH5Elements_1_1EField.html#a4279511bf17bbc59fbf1fe19408a98e8" title="dictionary with attribures from sepatare attribute tags">tpAttrs</a>[key][0]].encode())).value=self.<a class="code" href="classH5Elements_1_1EField.html#a4279511bf17bbc59fbf1fe19408a98e8" title="dictionary with attribures from sepatare attribute tags">tpAttrs</a>[key][1].strip().encode()
<a name="l00205"></a>00205 
<a name="l00206"></a><a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250">00206</a>         self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>=f
<a name="l00207"></a>00207 
<a name="l00208"></a>00208         <span class="keywordflow">if</span> self.source:
<a name="l00209"></a>00209             <span class="keywordflow">if</span>  self.source.isValid() :
<a name="l00210"></a>00210                 <span class="keywordflow">return</span> self.source.strategy
<a name="l00211"></a>00211         <span class="keywordflow">else</span>:
<a name="l00212"></a>00212             <span class="keywordflow">print</span> <span class="stringliteral">&quot;invalid dataSource&quot;</span>
<a name="l00213"></a>00213 
<a name="l00214"></a>00214     <span class="comment">## runner  </span>
<a name="l00215"></a>00215     <span class="comment"># \brief During its thread run it fetches the data from the source  </span>
<a name="l00216"></a><a class="code" href="classH5Elements_1_1EField.html#a49582f2fbeefde265a26e5f679a47f9e">00216</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EField.html#a49582f2fbeefde265a26e5f679a47f9e" title="runner">run</a>(self):
<a name="l00217"></a>00217         <span class="keywordflow">if</span> self.source:
<a name="l00218"></a>00218             dh=self.source.getData()
<a name="l00219"></a>00219             <span class="keywordflow">if</span> dh:
<a name="l00220"></a>00220 <span class="comment">#                print &quot;shape&quot;, self.fObject.shape, dh.shape</span>
<a name="l00221"></a>00221                 <span class="keywordflow">if</span> <span class="keywordflow">not</span> self.<a class="code" href="classH5Elements_1_1EField.html#a5f0837583c5bf72ca38465ad218305d1" title="if field is stored in STEP mode">extraD</a>:
<a name="l00222"></a>00222                     <span class="keywordflow">if</span> str(dh.format).split(<span class="stringliteral">&apos;.&apos;</span>)[-1] == <span class="stringliteral">&quot;SCALAR&quot;</span>:
<a name="l00223"></a>00223                         self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.write(dh.value)
<a name="l00224"></a>00224                     <span class="keywordflow">if</span> str(dh.format).split(<span class="stringliteral">&apos;.&apos;</span>)[-1] == <span class="stringliteral">&quot;SPECTRUM&quot;</span>:
<a name="l00225"></a>00225                         self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.write(dh.value)
<a name="l00226"></a>00226                         <span class="keywordflow">pass</span>
<a name="l00227"></a>00227                     <span class="keywordflow">if</span> str(dh.format).split(<span class="stringliteral">&apos;.&apos;</span>)[-1] == <span class="stringliteral">&quot;IMAGE&quot;</span>:
<a name="l00228"></a>00228                         <span class="keywordflow">pass</span>
<a name="l00229"></a>00229                 <span class="keywordflow">else</span>:
<a name="l00230"></a>00230 <span class="comment">#                    print &quot;DH type&quot;, dh.type</span>
<a name="l00231"></a>00231 <span class="comment">#                    print &quot;DH format &quot;,str(dh.format).split(&apos;.&apos;)[-1]</span>
<a name="l00232"></a>00232                     <span class="keywordflow">if</span> str(dh.format).split(<span class="stringliteral">&apos;.&apos;</span>)[-1] == <span class="stringliteral">&quot;SCALAR&quot;</span>:
<a name="l00233"></a>00233                         self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.grow()
<a name="l00234"></a>00234 <span class="comment">#                        self.fObject[-1]=dh.value</span>
<a name="l00235"></a>00235                         <span class="keywordflow">if</span> NTP.nTypes[NTP.tTypes.index(str(dh.type))] == <span class="stringliteral">&quot;NX_CHAR&quot;</span>:
<a name="l00236"></a>00236                             self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>[self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.shape[0]-1]=str(dh.value)
<a name="l00237"></a>00237                         <span class="keywordflow">else</span>:
<a name="l00238"></a>00238                             self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>[self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.shape[0]-1]=dh.value
<a name="l00239"></a>00239                     <span class="keywordflow">if</span> str(dh.format).split(<span class="stringliteral">&apos;.&apos;</span>)[-1] == <span class="stringliteral">&quot;SPECTRUM&quot;</span>:
<a name="l00240"></a>00240                         self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.grow()
<a name="l00241"></a>00241                         <span class="keywordflow">if</span> NTP.nTypes[NTP.tTypes.index(str(dh.type))] == <span class="stringliteral">&quot;NX_CHAR&quot;</span>:
<a name="l00242"></a>00242                             <span class="keywordflow">print</span> <span class="stringliteral">&quot;fO SHAPE:&quot;</span> , self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.shape
<a name="l00243"></a>00243                             arr=numpy.array(list((str(el)) <span class="keywordflow">for</span> el <span class="keywordflow">in</span> dh.value),self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.dtype)
<a name="l00244"></a>00244                             <span class="keywordflow">print</span> <span class="stringliteral">&quot;ARRAY SHAPE: &quot;</span>, arr.shape, len(arr.shape) 
<a name="l00245"></a>00245 <span class="comment">#                            print &quot;ARRAY: &quot;, arr</span>
<a name="l00246"></a>00246                             <span class="keywordflow">if</span> len(arr.shape) == 1 <span class="keywordflow">and</span> arr.shape[0] == 1:
<a name="l00247"></a>00247                                 self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>[self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.shape[0]-1,:]=arr[0]
<a name="l00248"></a>00248                             <span class="keywordflow">else</span>:
<a name="l00249"></a>00249                                 self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>[self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.shape[0]-1,:]=arr
<a name="l00250"></a>00250                         <span class="keywordflow">else</span>:
<a name="l00251"></a>00251 <span class="comment">#                            print &quot;fO SHAPE:&quot; , self.fObject.shape</span>
<a name="l00252"></a>00252                             arr=dh.array(self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.dtype)
<a name="l00253"></a>00253 <span class="comment">#                            print &quot;ARRAY SHAPE: &quot;, dh.array(self.fObject.dtype).shape,len(arr.shape) </span>
<a name="l00254"></a>00254 <span class="comment">#                            print &quot;ARRAY: &quot;, arr</span>
<a name="l00255"></a>00255                             <span class="keywordflow">if</span> len(arr.shape) == 1 <span class="keywordflow">and</span> arr.shape[0] == 1:
<a name="l00256"></a>00256                                 self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>[self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.shape[0]-1,:]=arr[0]
<a name="l00257"></a>00257                             <span class="keywordflow">else</span>:                                
<a name="l00258"></a>00258                                 self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>[self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.shape[0]-1,:]=arr
<a name="l00259"></a>00259                     <span class="keywordflow">if</span> str(dh.format).split(<span class="stringliteral">&apos;.&apos;</span>)[-1] == <span class="stringliteral">&quot;IMAGE&quot;</span>:
<a name="l00260"></a>00260                         self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.grow()
<a name="l00261"></a>00261                         <span class="keywordflow">if</span> str(dh.type) <span class="keywordflow">not</span> <span class="keywordflow">in</span> NTP.tTypes <span class="keywordflow">or</span> NTP.nTypes[NTP.tTypes.index(str(dh.type))] == <span class="stringliteral">&quot;NX_CHAR&quot;</span>:
<a name="l00262"></a>00262                             <span class="comment">#                            print &quot;fO SHAPE:&quot; , self.fObject.shape</span>
<a name="l00263"></a>00263                             val=dh.value
<a name="l00264"></a>00264                             larr=[ [ str(val[j][i]) <span class="keywordflow">for</span> i <span class="keywordflow">in</span> range(len(val[0])) ] <span class="keywordflow">for</span> j <span class="keywordflow">in</span> range(len(val)) ]
<a name="l00265"></a>00265                             <span class="keywordflow">print</span> self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.dtype
<a name="l00266"></a>00266                             arr= numpy.array(larr)
<a name="l00267"></a>00267 <span class="comment">#                            arr= numpy.array(larr,self.fObject.dtype)</span>
<a name="l00268"></a>00268 <span class="comment">#                            arr=numpy.array(list((str(el)) for el in dh.value),self.fObject.dtype)</span>
<a name="l00269"></a>00269 <span class="comment">#                            print &quot;ARRAY SHAPE: &quot;, arr.shape, len(arr.shape) </span>
<a name="l00270"></a>00270 <span class="comment">#                            print &quot;ARRAY: &quot;, arr</span>
<a name="l00271"></a>00271                             self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>[self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.shape[0]-1,:,:]=arr
<a name="l00272"></a>00272                         <span class="keywordflow">else</span>:
<a name="l00273"></a>00273 <span class="comment">#                            print &quot;fO SHAPE:&quot; , self.fObject.shape</span>
<a name="l00274"></a>00274                             arr=dh.array(self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.dtype)
<a name="l00275"></a>00275 <span class="comment">#                            print &quot;ARRAY SHAPE: &quot;, dh.array(self.fObject.dtype).shape,len(arr.shape) </span>
<a name="l00276"></a>00276 <span class="comment">#                            print &quot;ARRAY: &quot;, arr</span>
<a name="l00277"></a>00277                             self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>[self.<a class="code" href="classH5Elements_1_1EField.html#ae8797dcd699ca34be6e5e20d73559250" title="stored H5 file object">fObject</a>.shape[0]-1,:,:]=arr
<a name="l00278"></a>00278 
<a name="l00279"></a>00279 
<a name="l00280"></a>00280 
<a name="l00281"></a>00281 <span class="comment">## group H5 tag element        </span>
<a name="l00282"></a><a class="code" href="classH5Elements_1_1EGroup.html">00282</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1EGroup.html" title="group H5 tag element">EGroup</a>(<a class="code" href="classH5Elements_1_1FElement.html" title="NeXuS runnable tag element tag element corresponding to one of H5 objects.">FElement</a>):        
<a name="l00283"></a>00283     <span class="comment">## constructor</span>
<a name="l00284"></a>00284     <span class="comment"># \param name tag name</span>
<a name="l00285"></a>00285     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00286"></a>00286     <span class="comment"># \param last the last element from the stack</span>
<a name="l00287"></a><a class="code" href="classH5Elements_1_1EGroup.html#a3ab898c36d1fa91a226417a3296a651b">00287</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EGroup.html#a3ab898c36d1fa91a226417a3296a651b" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00288"></a>00288         FElement.__init__(self,name,attrs,last)
<a name="l00289"></a>00289 
<a name="l00290"></a>00290         <span class="comment">## dictionary with attribures from sepatare attribute tags</span>
<a name="l00291"></a><a class="code" href="classH5Elements_1_1EGroup.html#af0bee9c867e8b439a291ab2f09f2516e">00291</a>         self.<a class="code" href="classH5Elements_1_1EGroup.html#af0bee9c867e8b439a291ab2f09f2516e" title="dictionary with attribures from sepatare attribute tags">tpAttrs</a>={}
<a name="l00292"></a>00292 
<a name="l00293"></a>00293         <span class="keywordflow">if</span> (<span class="stringliteral">&quot;type&quot;</span> <span class="keywordflow">in</span> attrs.keys()) <span class="keywordflow">and</span> (<span class="stringliteral">&quot;name&quot;</span> <span class="keywordflow">in</span> attrs.keys()):
<a name="l00294"></a>00294             <span class="keywordflow">print</span> <span class="stringliteral">&quot;type&quot;</span>, type(self.lastObject())
<a name="l00295"></a>00295             g=self.lastObject().create_group(attrs[<span class="stringliteral">&quot;name&quot;</span>].encode(),attrs[<span class="stringliteral">&quot;type&quot;</span>].encode())
<a name="l00296"></a>00296         <span class="keywordflow">elif</span> <span class="stringliteral">&quot;type&quot;</span> <span class="keywordflow">in</span> attrs.keys():
<a name="l00297"></a>00297             g=self.lastObject().create_group(attrs[<span class="stringliteral">&quot;type&quot;</span>][2:].encode(),attrs[<span class="stringliteral">&quot;type&quot;</span>].encode())
<a name="l00298"></a>00298         <span class="keywordflow">else</span>:
<a name="l00299"></a>00299             <span class="keywordflow">raise</span> <span class="stringliteral">&quot;The group type not defined !!!&quot;</span>
<a name="l00300"></a><a class="code" href="classH5Elements_1_1EGroup.html#aeb9bf60e89f45e2df375c9e5081e736d">00300</a>         self.<a class="code" href="classH5Elements_1_1EGroup.html#aeb9bf60e89f45e2df375c9e5081e736d" title="stored H5 file object">fObject</a>=g
<a name="l00301"></a>00301         <span class="keywordflow">for</span> key <span class="keywordflow">in</span> attrs.keys() :
<a name="l00302"></a>00302             <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> [<span class="stringliteral">&quot;name&quot;</span>,<span class="stringliteral">&quot;type&quot;</span>]:
<a name="l00303"></a>00303                 <span class="keywordflow">if</span> key <span class="keywordflow">in</span> NTP.dA.keys():
<a name="l00304"></a>00304                     (g.attr(key.encode(),NTP.mt[NTP.dA[key]].encode())).value=attrs[key].encode()
<a name="l00305"></a>00305                 <span class="keywordflow">else</span>:
<a name="l00306"></a>00306                     (g.attr(key.encode(),<span class="stringliteral">&quot;string&quot;</span>)).value=attrs[key].encode()
<a name="l00307"></a>00307 
<a name="l00308"></a>00308     <span class="comment">## stores the tag content</span>
<a name="l00309"></a>00309     <span class="comment"># \param name the tag name    </span>
<a name="l00310"></a><a class="code" href="classH5Elements_1_1EGroup.html#a16ec0be870d3751c0af90b2fb64e34cc">00310</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EGroup.html#a16ec0be870d3751c0af90b2fb64e34cc" title="stores the tag content">store</a>(self,name):
<a name="l00311"></a>00311         <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self.<a class="code" href="classH5Elements_1_1EGroup.html#af0bee9c867e8b439a291ab2f09f2516e" title="dictionary with attribures from sepatare attribute tags">tpAttrs</a>.keys() :
<a name="l00312"></a>00312             <span class="keywordflow">if</span> key <span class="keywordflow">not</span> <span class="keywordflow">in</span> [<span class="stringliteral">&quot;name&quot;</span>,<span class="stringliteral">&quot;type&quot;</span>]:
<a name="l00313"></a>00313                 (self.<a class="code" href="classH5Elements_1_1EGroup.html#aeb9bf60e89f45e2df375c9e5081e736d" title="stored H5 file object">fObject</a>.attr(key.encode(),NTP.mt[self.<a class="code" href="classH5Elements_1_1EGroup.html#af0bee9c867e8b439a291ab2f09f2516e" title="dictionary with attribures from sepatare attribute tags">tpAttrs</a>[key][0]].encode())).value=self.<a class="code" href="classH5Elements_1_1EGroup.html#af0bee9c867e8b439a291ab2f09f2516e" title="dictionary with attribures from sepatare attribute tags">tpAttrs</a>[key][1].encode()
<a name="l00314"></a>00314 
<a name="l00315"></a>00315 
<a name="l00316"></a>00316     <span class="comment">## fetches the type and the name of the current group            </span>
<a name="l00317"></a>00317     <span class="comment"># \param groupTypes dictionary with the group type:name pairs            </span>
<a name="l00318"></a><a class="code" href="classH5Elements_1_1EGroup.html#abccdc92a4b4de689590502b11a0820af">00318</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EGroup.html#abccdc92a4b4de689590502b11a0820af" title="fetches the type and the name of the current group">fetchName</a>(self,groupTypes):
<a name="l00319"></a>00319         <span class="keywordflow">print</span> <span class="stringliteral">&quot;fetching&quot;</span>
<a name="l00320"></a>00320         <span class="keywordflow">if</span> (<span class="stringliteral">&quot;type&quot;</span> <span class="keywordflow">in</span> self.tAttrs.keys()) <span class="keywordflow">and</span> (<span class="stringliteral">&quot;name&quot;</span> <span class="keywordflow">in</span> self.tAttrs.keys()):
<a name="l00321"></a>00321             groupTypes[self.tAttrs[<span class="stringliteral">&quot;type&quot;</span>]]=self.tAttrs[<span class="stringliteral">&quot;name&quot;</span>]
<a name="l00322"></a>00322             <span class="keywordflow">print</span> <span class="stringliteral">&quot;typeGroup&quot;</span>, groupTypes[self.tAttrs[<span class="stringliteral">&quot;type&quot;</span>]]
<a name="l00323"></a>00323         <span class="keywordflow">elif</span> <span class="stringliteral">&quot;type&quot;</span> <span class="keywordflow">in</span> self.tAttrs.keys():
<a name="l00324"></a>00324             groupTypes[self.tAttrs[<span class="stringliteral">&quot;type&quot;</span>]]=self.tAttrs[<span class="stringliteral">&quot;type&quot;</span>][2:]
<a name="l00325"></a>00325             <span class="keywordflow">print</span> <span class="stringliteral">&quot;typeGroup&quot;</span>, groupTypes[self.tAttrs[<span class="stringliteral">&quot;type&quot;</span>]]
<a name="l00326"></a>00326         <span class="keywordflow">else</span>:
<a name="l00327"></a>00327             <span class="keywordflow">raise</span> <span class="stringliteral">&quot;The group type not defined !!!&quot;</span>
<a name="l00328"></a>00328         
<a name="l00329"></a>00329         
<a name="l00330"></a>00330 
<a name="l00331"></a>00331 
<a name="l00332"></a>00332 <span class="comment">## link H5 tag element        </span>
<a name="l00333"></a><a class="code" href="classH5Elements_1_1ELink.html">00333</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1ELink.html" title="link H5 tag element">ELink</a>(<a class="code" href="classH5Elements_1_1FElement.html" title="NeXuS runnable tag element tag element corresponding to one of H5 objects.">FElement</a>):        
<a name="l00334"></a>00334     <span class="comment">## constructor</span>
<a name="l00335"></a>00335     <span class="comment"># \param name tag name</span>
<a name="l00336"></a>00336     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00337"></a>00337     <span class="comment"># \param last the last element from the stack</span>
<a name="l00338"></a><a class="code" href="classH5Elements_1_1ELink.html#a15f6a1e9476b5ef916b597243a79b0e8">00338</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1ELink.html#a15f6a1e9476b5ef916b597243a79b0e8" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00339"></a>00339         FElement.__init__(self,name,attrs,last)
<a name="l00340"></a><a class="code" href="classH5Elements_1_1ELink.html#a3b71ab0736b0ce0c69d59f91cf6ee107">00340</a>         self.<a class="code" href="classH5Elements_1_1ELink.html#a3b71ab0736b0ce0c69d59f91cf6ee107" title="stored H5 file object">fObject</a>=<span class="keywordtype">None</span>
<a name="l00341"></a>00341 
<a name="l00342"></a>00342     <span class="comment">## converts types to Names using groupTypes dictionary</span>
<a name="l00343"></a>00343     <span class="comment"># \param text original directory     </span>
<a name="l00344"></a>00344     <span class="comment"># \param groupTypes dictionary with type:name group pairs</span>
<a name="l00345"></a>00345     <span class="comment"># \returns directory defined by group namesS    </span>
<a name="l00346"></a><a class="code" href="classH5Elements_1_1ELink.html#acc66ee4d29d63fd921d96974e45413fc">00346</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1ELink.html#acc66ee4d29d63fd921d96974e45413fc" title="converts types to Names using groupTypes dictionary">typesToNames</a>(self,text,groupTypes):
<a name="l00347"></a>00347         <span class="stringliteral">&quot;&quot;&quot;  converts NXclass types to names in a path string&quot;&quot;&quot;</span>
<a name="l00348"></a>00348         sp= text.split(<span class="stringliteral">&quot;/&quot;</span>)
<a name="l00349"></a>00349         <span class="keywordflow">print</span> <span class="stringliteral">&quot;TTN:&quot;</span>, sp 
<a name="l00350"></a>00350         res=<span class="stringliteral">&quot;/&quot;</span>
<a name="l00351"></a>00351         <span class="keywordflow">for</span> gr <span class="keywordflow">in</span> sp[:-1]:
<a name="l00352"></a>00352             sgr=gr.split(<span class="stringliteral">&quot;:&quot;</span>)
<a name="l00353"></a>00353             <span class="keywordflow">print</span> sgr
<a name="l00354"></a>00354             <span class="keywordflow">if</span> len(sgr)&gt;1 :
<a name="l00355"></a>00355                 res=<span class="stringliteral">&quot;/&quot;</span>.join([res,sgr[1]])
<a name="l00356"></a>00356             <span class="keywordflow">else</span>:
<a name="l00357"></a>00357                 <span class="keywordflow">if</span> sgr[0] <span class="keywordflow">in</span> groupTypes:
<a name="l00358"></a>00358                     res=<span class="stringliteral">&quot;/&quot;</span>.join([res,groupTypes[sgr[0]]])
<a name="l00359"></a>00359                 <span class="keywordflow">else</span>:
<a name="l00360"></a>00360                     <span class="keywordflow">print</span> <span class="stringliteral">&quot;sgr &quot;</span> ,sgr[0]
<a name="l00361"></a>00361                     <span class="keywordflow">raise</span> <span class="stringliteral">&quot;No sgr[0] in  groupTypes &quot;</span> 
<a name="l00362"></a>00362         res=res+<span class="stringliteral">&quot;/&quot;</span>+sp[-1]
<a name="l00363"></a>00363         <span class="keywordflow">print</span> <span class="stringliteral">&quot;TTN:&quot;</span>, res 
<a name="l00364"></a>00364 
<a name="l00365"></a>00365         <span class="keywordflow">return</span> res
<a name="l00366"></a>00366 
<a name="l00367"></a>00367         
<a name="l00368"></a>00368     <span class="comment">## creates the link the H5 file</span>
<a name="l00369"></a>00369     <span class="comment"># \param groupTypes dictionary with type:name group pairs</span>
<a name="l00370"></a><a class="code" href="classH5Elements_1_1ELink.html#ad55d058f16bea9ebc8c2a746bf67689a">00370</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1ELink.html#ad55d058f16bea9ebc8c2a746bf67689a" title="creates the link the H5 file">createLink</a>(self,groupTypes):
<a name="l00371"></a>00371         <span class="keywordflow">if</span> (<span class="stringliteral">&quot;name&quot;</span> <span class="keywordflow">in</span> self.tAttrs.keys()) <span class="keywordflow">and</span> (<span class="stringliteral">&quot;target&quot;</span> <span class="keywordflow">in</span> self.tAttrs.keys()):
<a name="l00372"></a>00372             <span class="keywordflow">print</span> <span class="stringliteral">&quot;linking &quot;</span>,self.lastObject() ,self.tAttrs[<span class="stringliteral">&quot;name&quot;</span>].encode()
<a name="l00373"></a>00373             l=(self.lastObject()).link((self.<a class="code" href="classH5Elements_1_1ELink.html#acc66ee4d29d63fd921d96974e45413fc" title="converts types to Names using groupTypes dictionary">typesToNames</a>(self.tAttrs[<span class="stringliteral">&quot;target&quot;</span>],groupTypes)).encode(),
<a name="l00374"></a>00374                                        self.tAttrs[<span class="stringliteral">&quot;name&quot;</span>].encode())
<a name="l00375"></a>00375             <span class="keywordflow">print</span> self.<a class="code" href="classH5Elements_1_1ELink.html#acc66ee4d29d63fd921d96974e45413fc" title="converts types to Names using groupTypes dictionary">typesToNames</a>(self.tAttrs[<span class="stringliteral">&quot;target&quot;</span>],groupTypes)
<a name="l00376"></a>00376         <span class="keywordflow">else</span>:
<a name="l00377"></a>00377             <span class="keywordflow">raise</span> <span class="stringliteral">&quot;No name or type!!!&quot;</span>
<a name="l00378"></a>00378         self.<a class="code" href="classH5Elements_1_1ELink.html#a3b71ab0736b0ce0c69d59f91cf6ee107" title="stored H5 file object">fObject</a>=l
<a name="l00379"></a>00379         <span class="keywordflow">for</span> key <span class="keywordflow">in</span> self.tAttrs.keys():
<a name="l00380"></a>00380             <span class="keywordflow">print</span> <span class="stringliteral">&quot;Attrs:&quot;</span>, key.encode(), self.tAttrs[key].encode()
<a name="l00381"></a>00381           
<a name="l00382"></a>00382                 
<a name="l00383"></a>00383 
<a name="l00384"></a>00384 
<a name="l00385"></a>00385 <span class="comment">## attribute tag element        </span>
<a name="l00386"></a><a class="code" href="classH5Elements_1_1EAttribute.html">00386</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1EAttribute.html" title="attribute tag element">EAttribute</a>(<a class="code" href="classElement_1_1Element.html" title="Tag element stored on our stack.">Element</a>):        
<a name="l00387"></a>00387     <span class="comment">## constructor</span>
<a name="l00388"></a>00388     <span class="comment"># \param name tag name</span>
<a name="l00389"></a>00389     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00390"></a>00390     <span class="comment"># \param last the last element from the stack</span>
<a name="l00391"></a><a class="code" href="classH5Elements_1_1EAttribute.html#a42067c9a356fa17bbeb49de2acf9c438">00391</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EAttribute.html#a42067c9a356fa17bbeb49de2acf9c438" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00392"></a>00392         Element.__init__(self,name,attrs,last)
<a name="l00393"></a>00393 
<a name="l00394"></a>00394 
<a name="l00395"></a>00395     <span class="comment">## stores the tag content</span>
<a name="l00396"></a>00396     <span class="comment"># \param name the tag name    </span>
<a name="l00397"></a><a class="code" href="classH5Elements_1_1EAttribute.html#a0803bba087db250ff203d32f1facd69a">00397</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EAttribute.html#a0803bba087db250ff203d32f1facd69a" title="stores the tag content">store</a>(self,name):
<a name="l00398"></a>00398         <span class="keywordflow">print</span> <span class="stringliteral">&quot;Storing Attributes:&quot;</span>, <span class="stringliteral">&quot;&quot;</span>.join(self.content)
<a name="l00399"></a>00399 
<a name="l00400"></a>00400 
<a name="l00401"></a>00401         <span class="keywordflow">if</span> <span class="stringliteral">&quot;name&quot;</span> <span class="keywordflow">in</span> self.tAttrs.keys(): 
<a name="l00402"></a>00402             nm = self.tAttrs[<span class="stringliteral">&quot;name&quot;</span>]
<a name="l00403"></a>00403             <span class="keywordflow">if</span> <span class="stringliteral">&quot;type&quot;</span> <span class="keywordflow">in</span> self.tAttrs.keys() :
<a name="l00404"></a>00404                 tp = self.tAttrs[<span class="stringliteral">&quot;type&quot;</span>]
<a name="l00405"></a>00405             <span class="keywordflow">else</span>:        
<a name="l00406"></a>00406                 tp = <span class="stringliteral">&quot;NX_CHAR&quot;</span>
<a name="l00407"></a>00407                 
<a name="l00408"></a>00408             self.last.tpAttrs[nm]=(tp,(<span class="stringliteral">&quot;&quot;</span>.join(self.content)).strip().encode())
<a name="l00409"></a>00409 
<a name="l00410"></a>00410 
<a name="l00411"></a>00411 
<a name="l00412"></a>00412 
<a name="l00413"></a>00413 <span class="comment">## file H5 element        </span>
<a name="l00414"></a><a class="code" href="classH5Elements_1_1EFile.html">00414</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1EFile.html" title="file H5 element">EFile</a>(<a class="code" href="classH5Elements_1_1FElement.html" title="NeXuS runnable tag element tag element corresponding to one of H5 objects.">FElement</a>):        
<a name="l00415"></a>00415     <span class="comment">## constructor</span>
<a name="l00416"></a>00416     <span class="comment"># \param name tag name</span>
<a name="l00417"></a>00417     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00418"></a>00418     <span class="comment"># \param last the last element from the stack</span>
<a name="l00419"></a>00419     <span class="comment"># \param obj H5 file object</span>
<a name="l00420"></a><a class="code" href="classH5Elements_1_1EFile.html#a8583b07993d4f52b537bb202bdb39863">00420</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EFile.html#a8583b07993d4f52b537bb202bdb39863" title="constructor">__init__</a>(self,name,attrs,last,obj):
<a name="l00421"></a>00421         FElement.__init__(self,name,attrs,last,obj)
<a name="l00422"></a>00422 
<a name="l00423"></a>00423 
<a name="l00424"></a>00424 
<a name="l00425"></a>00425 <span class="comment">## doc tag element        </span>
<a name="l00426"></a><a class="code" href="classH5Elements_1_1EDoc.html">00426</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1EDoc.html" title="doc tag element">EDoc</a>(<a class="code" href="classElement_1_1Element.html" title="Tag element stored on our stack.">Element</a>):        
<a name="l00427"></a>00427     <span class="comment">## constructor</span>
<a name="l00428"></a>00428     <span class="comment"># \param name tag name</span>
<a name="l00429"></a>00429     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00430"></a>00430     <span class="comment"># \param last the last element from the stack</span>
<a name="l00431"></a><a class="code" href="classH5Elements_1_1EDoc.html#a1680abdb0cd1799968e6661a70d1d341">00431</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EDoc.html#a1680abdb0cd1799968e6661a70d1d341" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00432"></a>00432         Element.__init__(self,name,attrs,last)
<a name="l00433"></a>00433 
<a name="l00434"></a>00434     <span class="comment">## stores the tag content</span>
<a name="l00435"></a>00435     <span class="comment"># \param name the tag name    </span>
<a name="l00436"></a><a class="code" href="classH5Elements_1_1EDoc.html#a4ab92a516cf1b5f99995cc35ddcfbcba">00436</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EDoc.html#a4ab92a516cf1b5f99995cc35ddcfbcba" title="stores the tag content">store</a>(self,name):
<a name="l00437"></a>00437         self.last.doc=self.last.doc + <span class="stringliteral">&quot;&quot;</span>.join(self.content)            
<a name="l00438"></a>00438         <span class="keywordflow">print</span> <span class="stringliteral">&quot;Added doc\n&quot;</span>, self.last.doc
<a name="l00439"></a>00439 
<a name="l00440"></a>00440 <span class="comment">## symbol tag element        </span>
<a name="l00441"></a><a class="code" href="classH5Elements_1_1ESymbol.html">00441</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1ESymbol.html" title="symbol tag element">ESymbol</a>(<a class="code" href="classElement_1_1Element.html" title="Tag element stored on our stack.">Element</a>):        
<a name="l00442"></a>00442     <span class="comment">## constructor</span>
<a name="l00443"></a>00443     <span class="comment"># \param name tag name</span>
<a name="l00444"></a>00444     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00445"></a>00445     <span class="comment"># \param last the last element from the stack</span>
<a name="l00446"></a><a class="code" href="classH5Elements_1_1ESymbol.html#ae29345c630720f8c56b66c6ab74c39be">00446</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1ESymbol.html#ae29345c630720f8c56b66c6ab74c39be" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00447"></a>00447         Element.__init__(self,name,attrs,last)
<a name="l00448"></a>00448         <span class="comment">## dictionary with symbols</span>
<a name="l00449"></a><a class="code" href="classH5Elements_1_1ESymbol.html#aa12375c96285f20a725ff953a6d017b8">00449</a>         self.<a class="code" href="classH5Elements_1_1ESymbol.html#aa12375c96285f20a725ff953a6d017b8" title="dictionary with symbols">symbols</a>={}
<a name="l00450"></a>00450 
<a name="l00451"></a>00451     <span class="comment">## stores the tag content</span>
<a name="l00452"></a>00452     <span class="comment"># \param name the tag name    </span>
<a name="l00453"></a><a class="code" href="classH5Elements_1_1ESymbol.html#aef5a885ba867f51e723db359e41f6280">00453</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1ESymbol.html#aef5a885ba867f51e723db359e41f6280" title="stores the tag content">store</a>(self,name):
<a name="l00454"></a>00454         <span class="keywordflow">if</span> <span class="stringliteral">&quot;name&quot;</span> <span class="keywordflow">in</span> self.tAttrs.keys():
<a name="l00455"></a>00455             self.<a class="code" href="classH5Elements_1_1ESymbol.html#aa12375c96285f20a725ff953a6d017b8" title="dictionary with symbols">symbols</a>[self.tAttrs[<span class="stringliteral">&quot;name&quot;</span>]]=self.last().doc
<a name="l00456"></a>00456 
<a name="l00457"></a>00457 
<a name="l00458"></a>00458 <span class="comment">## record tag element        </span>
<a name="l00459"></a><a class="code" href="classH5Elements_1_1ERecord.html">00459</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1ERecord.html" title="record tag element">ERecord</a>(<a class="code" href="classElement_1_1Element.html" title="Tag element stored on our stack.">Element</a>):        
<a name="l00460"></a>00460     <span class="comment">## constructor</span>
<a name="l00461"></a>00461     <span class="comment"># \param name tag name</span>
<a name="l00462"></a>00462     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00463"></a>00463     <span class="comment"># \param last the last element from the stack</span>
<a name="l00464"></a><a class="code" href="classH5Elements_1_1ERecord.html#a11c91d973c319626d283c13a2679140b">00464</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1ERecord.html#a11c91d973c319626d283c13a2679140b" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00465"></a>00465         Element.__init__(self,name,attrs,last)
<a name="l00466"></a>00466         <span class="keywordflow">if</span> <span class="stringliteral">&quot;type&quot;</span> <span class="keywordflow">in</span> attrs.keys():
<a name="l00467"></a>00467             self.beforeLast().source.type=attrs[<span class="stringliteral">&quot;type&quot;</span>]
<a name="l00468"></a>00468         <span class="keywordflow">if</span> <span class="stringliteral">&quot;name&quot;</span> <span class="keywordflow">in</span> attrs.keys():
<a name="l00469"></a>00469             self.beforeLast().source.name=attrs[<span class="stringliteral">&quot;name&quot;</span>]
<a name="l00470"></a>00470 
<a name="l00471"></a>00471 
<a name="l00472"></a>00472 <span class="comment">## device tag element        </span>
<a name="l00473"></a><a class="code" href="classH5Elements_1_1EDevice.html">00473</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1EDevice.html" title="device tag element">EDevice</a>(<a class="code" href="classElement_1_1Element.html" title="Tag element stored on our stack.">Element</a>):        
<a name="l00474"></a>00474     <span class="comment">## constructor</span>
<a name="l00475"></a>00475     <span class="comment"># \param name tag name</span>
<a name="l00476"></a>00476     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00477"></a>00477     <span class="comment"># \param last the last element from the stack</span>
<a name="l00478"></a><a class="code" href="classH5Elements_1_1EDevice.html#a2ef0d670208549cb7eeafe75af802368">00478</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EDevice.html#a2ef0d670208549cb7eeafe75af802368" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00479"></a>00479         Element.__init__(self,name,attrs,last)
<a name="l00480"></a>00480         <span class="keywordflow">if</span> <span class="stringliteral">&quot;name&quot;</span> <span class="keywordflow">in</span> attrs.keys():
<a name="l00481"></a>00481             self.beforeLast().source.device=attrs[<span class="stringliteral">&quot;name&quot;</span>]
<a name="l00482"></a>00482 
<a name="l00483"></a>00483 <span class="comment">## door tag element        </span>
<a name="l00484"></a><a class="code" href="classH5Elements_1_1EDoor.html">00484</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1EDoor.html" title="door tag element">EDoor</a>(<a class="code" href="classElement_1_1Element.html" title="Tag element stored on our stack.">Element</a>):        
<a name="l00485"></a>00485     <span class="comment">## constructor</span>
<a name="l00486"></a>00486     <span class="comment"># \param name tag name</span>
<a name="l00487"></a>00487     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00488"></a>00488     <span class="comment"># \param last the last element from the stack</span>
<a name="l00489"></a><a class="code" href="classH5Elements_1_1EDoor.html#ae4bda86f18b9555bc435883e109415a9">00489</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EDoor.html#ae4bda86f18b9555bc435883e109415a9" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00490"></a>00490         Element.__init__(self,name,attrs,last)
<a name="l00491"></a>00491         <span class="keywordflow">if</span> <span class="stringliteral">&quot;name&quot;</span> <span class="keywordflow">in</span> attrs.keys():
<a name="l00492"></a>00492             self.beforeLast().source.door=attrs[<span class="stringliteral">&quot;name&quot;</span>]
<a name="l00493"></a>00493 
<a name="l00494"></a>00494 
<a name="l00495"></a>00495 <span class="comment">## query tag element        </span>
<a name="l00496"></a><a class="code" href="classH5Elements_1_1EQuery.html">00496</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1EQuery.html" title="query tag element">EQuery</a>(<a class="code" href="classElement_1_1Element.html" title="Tag element stored on our stack.">Element</a>):        
<a name="l00497"></a>00497     <span class="comment">## constructor</span>
<a name="l00498"></a>00498     <span class="comment"># \param name tag name</span>
<a name="l00499"></a>00499     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00500"></a>00500     <span class="comment"># \param last the last element from the stack</span>
<a name="l00501"></a><a class="code" href="classH5Elements_1_1EQuery.html#a4762ac1d81b6253845dc4a179880ffd9">00501</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EQuery.html#a4762ac1d81b6253845dc4a179880ffd9" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00502"></a>00502         Element.__init__(self,name,attrs,last)
<a name="l00503"></a>00503         <span class="keywordflow">if</span> <span class="stringliteral">&quot;dbname&quot;</span> <span class="keywordflow">in</span> attrs.keys():
<a name="l00504"></a>00504             self.beforeLast().source.dbname=attrs[<span class="stringliteral">&quot;dbname&quot;</span>]
<a name="l00505"></a>00505         <span class="keywordflow">if</span> <span class="stringliteral">&quot;user&quot;</span> <span class="keywordflow">in</span> attrs.keys():
<a name="l00506"></a>00506             self.beforeLast().source.user=attrs[<span class="stringliteral">&quot;user&quot;</span>]
<a name="l00507"></a>00507         <span class="keywordflow">if</span> <span class="stringliteral">&quot;passwd&quot;</span> <span class="keywordflow">in</span> attrs.keys():
<a name="l00508"></a>00508             self.beforeLast().source.passwd=attrs[<span class="stringliteral">&quot;passwd&quot;</span>]
<a name="l00509"></a>00509         <span class="keywordflow">if</span> <span class="stringliteral">&quot;format&quot;</span> <span class="keywordflow">in</span> attrs.keys():
<a name="l00510"></a>00510             self.beforeLast().source.format=attrs[<span class="stringliteral">&quot;format&quot;</span>]
<a name="l00511"></a>00511         <span class="keywordflow">if</span> <span class="stringliteral">&quot;mycnf&quot;</span> <span class="keywordflow">in</span> attrs.keys():
<a name="l00512"></a>00512             self.beforeLast().source.mycnf=attrs[<span class="stringliteral">&quot;mycnf&quot;</span>]
<a name="l00513"></a>00513 
<a name="l00514"></a>00514     <span class="comment">## stores the tag content</span>
<a name="l00515"></a>00515     <span class="comment"># \param name the tag name    </span>
<a name="l00516"></a><a class="code" href="classH5Elements_1_1EQuery.html#a42591031918d8de7cee72a1f66f5da9e">00516</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EQuery.html#a42591031918d8de7cee72a1f66f5da9e" title="stores the tag content">store</a>(self,name):
<a name="l00517"></a>00517         self.beforeLast().source.query= (<span class="stringliteral">&quot;&quot;</span>.join(self.content)).strip()        
<a name="l00518"></a>00518 
<a name="l00519"></a>00519  
<a name="l00520"></a>00520 <span class="comment">## dimensions tag element        </span>
<a name="l00521"></a><a class="code" href="classH5Elements_1_1EDimensions.html">00521</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1EDimensions.html" title="dimensions tag element">EDimensions</a>(<a class="code" href="classElement_1_1Element.html" title="Tag element stored on our stack.">Element</a>):        
<a name="l00522"></a>00522     <span class="comment">## constructor</span>
<a name="l00523"></a>00523     <span class="comment"># \param name tag name</span>
<a name="l00524"></a>00524     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00525"></a>00525     <span class="comment"># \param last the last element from the stack</span>
<a name="l00526"></a><a class="code" href="classH5Elements_1_1EDimensions.html#ac573211ddcc848f54103d9c68c903e6c">00526</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EDimensions.html#ac573211ddcc848f54103d9c68c903e6c" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00527"></a>00527         Element.__init__(self,name,attrs,last)
<a name="l00528"></a>00528         <span class="keywordflow">if</span> <span class="stringliteral">&quot;rank&quot;</span> <span class="keywordflow">in</span> attrs.keys():
<a name="l00529"></a>00529             self.last.rank=attrs[<span class="stringliteral">&quot;rank&quot;</span>]
<a name="l00530"></a>00530             <span class="keywordflow">print</span> <span class="stringliteral">&quot;setting rank to &quot;</span>, self.last.rank
<a name="l00531"></a>00531 
<a name="l00532"></a>00532 <span class="comment">## dim tag element        </span>
<a name="l00533"></a><a class="code" href="classH5Elements_1_1EDim.html">00533</a> <span class="keyword">class </span><a class="code" href="classH5Elements_1_1EDim.html" title="dim tag element">EDim</a>(<a class="code" href="classElement_1_1Element.html" title="Tag element stored on our stack.">Element</a>):        
<a name="l00534"></a>00534     <span class="comment">## constructor</span>
<a name="l00535"></a>00535     <span class="comment"># \param name tag name</span>
<a name="l00536"></a>00536     <span class="comment"># \param attrs dictionary of the tag attributes</span>
<a name="l00537"></a>00537     <span class="comment"># \param last the last element from the stack</span>
<a name="l00538"></a><a class="code" href="classH5Elements_1_1EDim.html#ad40b269d818a529b5fbd09cab4d29d12">00538</a>     <span class="keyword">def </span><a class="code" href="classH5Elements_1_1EDim.html#ad40b269d818a529b5fbd09cab4d29d12" title="constructor">__init__</a>(self,name,attrs,last):
<a name="l00539"></a>00539         Element.__init__(self,name,attrs,last)
<a name="l00540"></a>00540         <span class="keywordflow">if</span> (<span class="stringliteral">&quot;index&quot;</span>  <span class="keywordflow">in</span> attrs.keys()) <span class="keywordflow">and</span>  (<span class="stringliteral">&quot;value&quot;</span>  <span class="keywordflow">in</span> attrs.keys()) :
<a name="l00541"></a>00541             self.beforeLast().lengths[attrs[<span class="stringliteral">&quot;index&quot;</span>]]=attrs[<span class="stringliteral">&quot;value&quot;</span>]
<a name="l00542"></a>00542             <span class="keywordflow">print</span> <span class="stringliteral">&quot;setting dim %s to %s &quot;</span> % (attrs[<span class="stringliteral">&quot;index&quot;</span>], attrs[<span class="stringliteral">&quot;value&quot;</span>])
<a name="l00543"></a>00543 
<a name="l00544"></a>00544 
</pre></div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&nbsp;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&nbsp;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&nbsp;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&nbsp;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&nbsp;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr size="1"/><address style="text-align: right;"><small>Generated on 7 Jun 2012 for NeXDaTaS by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.1 </small></address>
</body>
</html>
